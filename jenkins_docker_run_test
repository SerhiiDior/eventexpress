#!groovy
// Run docker build
properties([disableConcurrentBuilds()])

pipeline {
    agent {
        label 'master'
        }
    triggers { pollSCM('* * * * *') }
    options {
        buildDiscarder(logRotator(numToKeepStr: '10', artifactNumToKeepStr: '10'))
        timestamps()
    }

    try {    
    stage("start project"){
         steps {
              echo " ============== start tests =================="
              sh '''
              docker run  -v directory:/workdir svdior/pyslim
                ''' 
                  }
          } catch  {
             echo "Stage failed, but we continue"  
            }
    stage("start project"){
            steps {
                echo " ============== send_resalt =================="
                sh '''
                docker run  -v directory:/workdir svdior/pyslim python send_results.py
                '''
        }
    } 
